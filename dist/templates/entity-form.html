<!--
 betsol-ng-entity-form - Automatic entity forms for Angular.js
 @version v0.0.1
 @link https://github.com/betsol/ng-entity-form
 @license MIT

 @author Slava Fomin II <s.fomin@betsol.ru>
-->
<h1 ng-if="'update' == mode">Редактирование записи</h1>
<h1 ng-if="'create' == mode">Создание записи</h1>

<hr>

<form name="form" role="form" class="col-lg-6">

    <fieldset ng-repeat="fieldset in formScheme">

        <hr ng-if="!$first">

        <h2 ng-if="fieldset.title">{~ fieldset.title ~}</h2>

        <div class="form-group" ng-repeat="(fieldName, field) in fieldset.fields" ng-switch="field.type">

            <div ng-switch-default>
                <label for="field-{~ fieldName ~}">{~ field.title ~}</label>
                <input
                    ng-if="'input' == field.elementType"
                    id="field-{~ fieldName ~}"
                    name="{~ fieldName ~}"
                    class="form-control"
                    type="{~ field.inputType ~}"
                    ng-model="entityPath('entity.' + fieldName)"
                    ng-model-options="{ getterSetter: true }"
                    ng-required="field.required"
                    ng-disabled="processing"
                    ng-readonly="field.readonly"
                >
            </div>

            <div class="dropdown" ng-switch-when="datetime">
                <a class="dropdown-toggle my-toggle-select" id="dLabel" role="button" data-toggle="dropdown" data-target="#" href="">
                    <div class="input-append">
                        <input
                            type="text"
                            class="input-large"
                            data-ng-model="entityPath('entity.' + fieldName)"
                            ng-model-options="{ getterSetter: true }"
                        >
                        <span class="add-on"><i class="icon-calendar"></i></span>
                    </div>
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <datetimepicker
                        data-ng-model="entityPath('entity.' + fieldName)"
                        ng-model-options="{ getterSetter: true }"
                        data-datetimepicker-config="{ dropdownSelector: '.my-toggle-select' }"
                    ></datetimepicker>
                </ul>
            </div>

            <div class="dropdown checkbox" ng-switch-when="boolean">
                <label>
                  <input
                      type="checkbox"
                      name="{~ fieldName ~}"
                      ng-model="entityPath('entity.' + fieldName)"
                      ng-model-options="{ getterSetter: true }"
                      ng-required="field.required"
                      ng-disabled="processing"
                      ng-readonly="field.readonly"
                  > {~ field.title ~}
                </label>
            </div>

        </div>

    </fieldset>

    <hr>

    <button
        type="button"
        class="btn btn-default"
        ng-click="cancel()"
        ng-disabled="processing"
    >
        <span class="fa fa-chevron-left"></span>
        Назад
    </button>

    <div class="btn-group pull-right">

        <button
            type="button"
            class="btn btn-default"
            ng-click="reset()"
            ng-disabled="processing"
        >
            <span class="fa fa-times"></span>
            Сбросить
        </button>

        <button
            type="submit"
            class="btn btn-primary"
            ng-click="save(form)"
            ng-disabled="processing"
        >
            <span class="fa fa-save"></span>
            Сохранить
        </button>

    </div>

</form>
